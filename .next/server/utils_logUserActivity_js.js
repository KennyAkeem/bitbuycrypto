"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "utils_logUserActivity_js";
exports.ids = ["utils_logUserActivity_js"];
exports.modules = {

/***/ "./utils/logUserActivity.js":
/*!**********************************!*\
  !*** ./utils/logUserActivity.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logUserActivity: () => (/* binding */ logUserActivity)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/supabaseClient */ \"./lib/supabaseClient.js\");\n\nasync function logUserActivity(user_id, event, description = \"\") {\n    try {\n        // 1️⃣ Get user's public IP\n        const ipRes = await fetch(\"https://api.ipify.org?format=json\");\n        const { ip } = await ipRes.json();\n        // 2️⃣ Get location data\n        const locRes = await fetch(`https://ipapi.co/${ip}/json/`);\n        const locationData = await locRes.json();\n        // Extract details to match your table columns\n        const city = locationData?.city || \"Unknown\";\n        const region = locationData?.region || \"Unknown\";\n        const country = locationData?.country_name || \"Unknown\";\n        // 3️⃣ Insert into Supabase\n        const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"user_activity\").insert([\n            {\n                user_id,\n                event,\n                description,\n                ip,\n                city,\n                region,\n                country\n            }\n        ]);\n        if (error) console.error(\"Failed to log user activity:\", error.message);\n    } catch (err) {\n        console.error(\"Error logging user activity:\", err);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9sb2dVc2VyQWN0aXZpdHkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUQ7QUFFMUMsZUFBZUMsZ0JBQWdCQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsY0FBYyxFQUFFO0lBQ3BFLElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsTUFBTUMsUUFBUSxNQUFNQyxNQUFNO1FBQzFCLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUcsTUFBTUYsTUFBTUcsSUFBSTtRQUUvQix3QkFBd0I7UUFDeEIsTUFBTUMsU0FBUyxNQUFNSCxNQUFNLENBQUMsaUJBQWlCLEVBQUVDLEdBQUcsTUFBTSxDQUFDO1FBQ3pELE1BQU1HLGVBQWUsTUFBTUQsT0FBT0QsSUFBSTtRQUV0Qyw4Q0FBOEM7UUFDOUMsTUFBTUcsT0FBT0QsY0FBY0MsUUFBUTtRQUNuQyxNQUFNQyxTQUFTRixjQUFjRSxVQUFVO1FBQ3ZDLE1BQU1DLFVBQVVILGNBQWNJLGdCQUFnQjtRQUU5QywyQkFBMkI7UUFDM0IsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNZix5REFBUUEsQ0FBQ2dCLElBQUksQ0FBQyxpQkFBaUJDLE1BQU0sQ0FBQztZQUM1RDtnQkFDRWY7Z0JBQ0FDO2dCQUNBQztnQkFDQUc7Z0JBQ0FJO2dCQUNBQztnQkFDQUM7WUFDRjtTQUNEO1FBRUQsSUFBSUUsT0FBT0csUUFBUUgsS0FBSyxDQUFDLGdDQUFnQ0EsTUFBTUksT0FBTztJQUN4RSxFQUFFLE9BQU9DLEtBQUs7UUFDWkYsUUFBUUgsS0FBSyxDQUFDLGdDQUFnQ0s7SUFDaEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2JpdGJ1eS8uL3V0aWxzL2xvZ1VzZXJBY3Rpdml0eS5qcz8wMTU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4uL2xpYi9zdXBhYmFzZUNsaWVudFwiO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ1VzZXJBY3Rpdml0eSh1c2VyX2lkLCBldmVudCwgZGVzY3JpcHRpb24gPSBcIlwiKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIDHvuI/ig6MgR2V0IHVzZXIncyBwdWJsaWMgSVBcclxuICAgIGNvbnN0IGlwUmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb25cIik7XHJcbiAgICBjb25zdCB7IGlwIH0gPSBhd2FpdCBpcFJlcy5qc29uKCk7XHJcblxyXG4gICAgLy8gMu+4j+KDoyBHZXQgbG9jYXRpb24gZGF0YVxyXG4gICAgY29uc3QgbG9jUmVzID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vaXBhcGkuY28vJHtpcH0vanNvbi9gKTtcclxuICAgIGNvbnN0IGxvY2F0aW9uRGF0YSA9IGF3YWl0IGxvY1Jlcy5qc29uKCk7XHJcblxyXG4gICAgLy8gRXh0cmFjdCBkZXRhaWxzIHRvIG1hdGNoIHlvdXIgdGFibGUgY29sdW1uc1xyXG4gICAgY29uc3QgY2l0eSA9IGxvY2F0aW9uRGF0YT8uY2l0eSB8fCBcIlVua25vd25cIjtcclxuICAgIGNvbnN0IHJlZ2lvbiA9IGxvY2F0aW9uRGF0YT8ucmVnaW9uIHx8IFwiVW5rbm93blwiO1xyXG4gICAgY29uc3QgY291bnRyeSA9IGxvY2F0aW9uRGF0YT8uY291bnRyeV9uYW1lIHx8IFwiVW5rbm93blwiO1xyXG5cclxuICAgIC8vIDPvuI/ig6MgSW5zZXJ0IGludG8gU3VwYWJhc2VcclxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oXCJ1c2VyX2FjdGl2aXR5XCIpLmluc2VydChbXHJcbiAgICAgIHtcclxuICAgICAgICB1c2VyX2lkLFxyXG4gICAgICAgIGV2ZW50LFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIGlwLFxyXG4gICAgICAgIGNpdHksXHJcbiAgICAgICAgcmVnaW9uLFxyXG4gICAgICAgIGNvdW50cnksXHJcbiAgICAgIH0sXHJcbiAgICBdKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9nIHVzZXIgYWN0aXZpdHk6XCIsIGVycm9yLm1lc3NhZ2UpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGxvZ2dpbmcgdXNlciBhY3Rpdml0eTpcIiwgZXJyKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwibG9nVXNlckFjdGl2aXR5IiwidXNlcl9pZCIsImV2ZW50IiwiZGVzY3JpcHRpb24iLCJpcFJlcyIsImZldGNoIiwiaXAiLCJqc29uIiwibG9jUmVzIiwibG9jYXRpb25EYXRhIiwiY2l0eSIsInJlZ2lvbiIsImNvdW50cnkiLCJjb3VudHJ5X25hbWUiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJjb25zb2xlIiwibWVzc2FnZSIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/logUserActivity.js\n");

/***/ })

};
;