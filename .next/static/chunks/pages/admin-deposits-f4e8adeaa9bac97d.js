(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{41652:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-deposits",function(){return n(57113)}])},57113:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n(85893),i=n(67294),d=n(77366);function a(){let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(!0),[r,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)("");async function u(){a(!0);let{data:e,error:n}=await d.O.from("deposit_addresses").select("*").order("coin",{ascending:!0});n?c(n.message):t(e||[]),a(!1)}function p(n,s,i){let d=[...e];d[n][s]=i,t(d)}async function g(t){let n;let s=e[t];o(!0);let{data:i}=await d.O.from("deposit_addresses").select("id").eq("coin",s.coin).single();(n=i?await d.O.from("deposit_addresses").update({address:s.address,network:s.network,updated_at:new Date}).eq("coin",s.coin):await d.O.from("deposit_addresses").insert([{coin:s.coin,network:s.network,address:s.address}])).error?alert("Error saving: "+n.error.message):(alert("Saved successfully!"),u()),o(!1)}return((0,i.useEffect)(()=>{u()},[]),n)?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{style:{padding:24},children:[(0,s.jsx)("h3",{children:"Admin: Manage Deposit Addresses"}),e.map((e,t)=>(0,s.jsxs)("div",{style:{border:"1px solid #eee",padding:12,marginBottom:10,borderRadius:8},children:[(0,s.jsx)("input",{type:"text",placeholder:"Coin (e.g. BTC)",value:e.coin,onChange:e=>p(t,"coin",e.target.value),style:{marginRight:10}}),(0,s.jsx)("input",{type:"text",placeholder:"Network (optional)",value:e.network||"",onChange:e=>p(t,"network",e.target.value),style:{marginRight:10}}),(0,s.jsx)("input",{type:"text",placeholder:"Address",value:e.address,onChange:e=>p(t,"address",e.target.value),style:{marginRight:10,width:"40%"}}),(0,s.jsx)("button",{onClick:()=>g(t),disabled:r,children:r?"Saving...":"Save"})]},t)),(0,s.jsx)("button",{onClick:function(){t([...e,{coin:"",network:"",address:""}])},children:"+ Add New Coin"})]})}function r(){return(0,s.jsxs)("div",{style:{padding:24},children:[(0,s.jsx)("h1",{children:"Admin Deposit Address Manager"}),(0,s.jsx)(a,{})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=41652)}),_N_E=e.O()}]);